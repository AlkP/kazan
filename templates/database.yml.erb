settings: &settings
  adapter: postgresql
  encoding: utf8
  min_messages: warning
  timeout: <%%= Integer(ENV.fetch('DATABASE_TIMEOUT'))%>
  pool: <%%= Integer(ENV.fetch('DATABASE_POOL'))%>


development:
  <<: *settings
  reaping_frequency: <%%= Integer(ENV.fetch('DATABASE_REAPING_FREQUENCY'))%>
  database: <%= app_name %>_development

test:
  <<: *settings
  reaping_frequency: <%%= Integer(ENV.fetch('DATABASE_REAPING_FREQUENCY'))%>
  database: <%= app_name %>_test

staging:
  <<: *settings
  database: <%= app_name %>_staging


production:
  <<: *settings
  username: <%%= String(ENV.fetch('DATABASE_USERNAME')) %>
  password: <%%= String(ENV.fetch('DATABASE_PASSWORD')) %>
  url: <%%= String(ENV.fetch('DATABASE_URL')) %>
  database: <%= app_name %>_production
  pool: <%%= [Integer(ENV.fetch('PUMA_THREADS')), Integer(ENV.fetch('DATABASE_POOL'))].max %>


